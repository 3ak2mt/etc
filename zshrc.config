# ~/.zshrc
# Description : Lean, keyboard-oriented Zsh config with Zinit and Tmux auto-start
# Author      : makmat
# Date        : 2025-12-02
# Version     : 1.0

# ------------------------------
# Prompt
# ------------------------------

PS1="  ${USER[1]}@${HOST[2]}_[%T] %1~: "

# ------------------------------
# History
# ------------------------------

HISTFILE="$HOME/.zsh_history"
HISTSIZE=5000
SAVEHIST=5000

setopt hist_ignore_dups
setopt share_history

# ------------------------------
# Built-in utilities
# ------------------------------

autoload -Uz zmv

# ------------------------------
# Custom aliases & functions
# ------------------------------

[[ -f "$HOME/.zsh_aliases" ]] && source "$HOME/.zsh_aliases"
[[ -f "$HOME/.zsh_func" ]]    && source "$HOME/.zsh_func"


# ------------------------------
# Zinit Plugin Manager
# ------------------------------

ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"
[ ! -d $ZINIT_HOME ] && mkdir -p "$(dirname $ZINIT_HOME)"
[ ! -d $ZINIT_HOME/.git ] && git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
source "${ZINIT_HOME}/zinit.zsh"

# ------------------------------
# Plugins
# ------------------------------

# Completion & suggestions
zinit ice lucid wait"0" noblock
zinit light zsh-users/zsh-completions
#
zinit ice lucid wait"1" atload"_zsh_autosuggest_start"
zinit light zsh-users/zsh-autosuggestions

zinit ice lucid wait"2"
zinit light zsh-users/zsh-syntax-highlighting

# ------------------------------
# Auto-start Tmux (for graphical terminals)
# ------------------------------

if [ -n "${DISPLAY-}" ] && [ -z "${TMUX-}" ] && [ "${TERM-}" != "screen" ]; then
    exec tmux
fi
